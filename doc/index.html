<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/azah/cowapi">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/doc.js"></script>
  <title>README - github.com/azah/cowapi</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li class="current"><a href="index.html">README</a></li>
  </ul>

  <ul>
  
  <li class="parent " data-id="github.com/azah/cowapi/Cowapi" data-name="cowapi">
      <a href="Cowapi.html">Cowapi</a>
      
        <ul>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/BattleTagHandler" data-name="cowapi::battletaghandler">
      <a href="Cowapi/BattleTagHandler.html">BattleTagHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/DataFetcher" data-name="cowapi::datafetcher">
      <a href="Cowapi/DataFetcher.html">DataFetcher</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/Hero" data-name="cowapi::hero">
      <a href="Cowapi/Hero.html">Hero</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/JsonHandler" data-name="cowapi::jsonhandler">
      <a href="Cowapi/JsonHandler.html">JsonHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/MixedTypes" data-name="cowapi::mixedtypes">
      <a href="Cowapi/MixedTypes.html">MixedTypes</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/ParamsHandler" data-name="cowapi::paramshandler">
      <a href="Cowapi/ParamsHandler.html">ParamsHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/Profile" data-name="cowapi::profile">
      <a href="Cowapi/Profile.html">Profile</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/ProfileStats" data-name="cowapi::profilestats">
      <a href="Cowapi/ProfileStats.html">ProfileStats</a>
      
    </li>
  
  <li class=" " data-id="github.com/azah/cowapi/Cowapi/Stat" data-name="cowapi::stat">
      <a href="Cowapi/Stat.html">Stat</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

</div>

<div id="main-content">
<h1>cowapi</h1>

<p>This is a Crystal implementation of <a href="https://github.com/SunDwarf/OWAPI" target="_blank">OWAPI</a>.</p>

<p>It utilizes the <a href="http://kemalcr.com/" target="_blank">Kemal</a> framework & <a href="https://redis.io/" target="_blank">Redis</a> for caching.</p>

<h2>Roadmap</h2>

<p>See <a href="roadmap.md" target="_blank">the Roadmap</a></p>

<h2>Using the API</h2>

<h3>URL Parameters</h3>

<h4>Region & Platform</h4>

<p>By default, the region is <code>us</code> and platform is <code>pc</code>.  
You can set these with <code>region</code> and <code>platform</code> parameters, respectively.</p>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes<span class="s">/lucio?region&#61;eu&amp;platform&#61;xbox</code></pre>

<p>Currently you cannot specify multiple regions/platforms in 1 request. That feature is on the roadmap.</p>

<h4>Mode: Comp, Quickplay, or Both</h4>

<p>By default, cowapi will return both competitive & quickplay stats.  
However you can specify one or the other via the <code>mode</code> parameter:</p>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes?mode<span class="o">=</span>competitive</code></pre>

<h3>Heroes/Hero</h3>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/:battleTag/</span>heroes<span class="s">/:hero</code></pre>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes<span class="s">/lucio</code></pre>

<p><strong>Singular Hero Request</strong></p>

<pre><code class='language-json'>{
	"name": "lucio",
	"quickplay": [
		{
		"name": "sound_barriers_provided",
		"value": 65,
		"category": "hero_specific"
		},
		{
		"name": "sound_barriers_provided_most_in_game",
		"value": 15,
		"category": "hero_specific"
		},
		{ ... }
	],
	"comp": [ ... ]
}</code></pre>

<h3>Heroes/Hero+Hero</h3>

<p>Multiple heroes can be specified! </p>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/:battleTag/</span>heroes<span class="s">/:hero1&#43;:hero2&#43;:heroN</code></pre>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes<span class="s">/lucio&#43;pharah</code></pre>

<p><strong>Multiple Heroes Request</strong>:</p>

<pre><code class='language-json'>[
	{
		"name": "lucio",
		"quickplay": [
			{
			"name": "sound_barriers_provided",
			"value": 65,
			"category": "hero_specific"
			},
			{
			"name": "sound_barriers_provided_most_in_game",
			"value": 15,
			"category": "hero_specific"
			},
			{ ... }
		],
		"comp": [ ... ]
	},
	{
		"name": "pharah",
		"quickplay": [
			{
			"name": "rocket_direct_hits",
			"value": 2598,
			"category": "hero_specific"
			},
			{
			"name": "barrage_kills",
			"value": 169,
			"category": "hero_specific"
			},
			{ ... }
		],
		"comp": [ ... ]
	},
]</code></pre>

<h3>Heroes</h3>

<p>The same as Heroes/Hero+Hero, but with all heroes + <strong>total</strong>.</p>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/:battleTag/</span>heroes</code></pre>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes</code></pre>

<h3>Profile</h3>

<p>Miscellaneous Profile Info + the same reponse as Heroes.</p>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/:battleTag/</span>heroes</code></pre>

<pre><code>https<span class="n">:/</span><span class="s">/apis.andrewzah.com/</span>cowapi<span class="s">/v1/</span>u<span class="s">/Dad-12262/</span>heroes</code></pre>

<p><strong>Profile result</strong>: Comp stats will only return if they have values. </p>

<pre><code class='language-json'>{
	"profile": {
		"avatar": "https://blzgdapipro-a.akamaihd.net/game/unlocks/0x0250000000000776.png",
		"name": "Dad",
		"player_level": 288,
		"border_portrait": "https://blzgdapipro-a.akamaihd.net/game/playerlevelrewards/0x025000000000092A_Border.png",
		"comp_rank": 2288,
		"tier_portrait": "https://blzgdapipro-a.akamaihd.net/game/rank-icons/season-2/rank-4.png",
		"tier": "Platinum",
		"games_won": 662
	},
	"heroes": [ ... ]
}</code></pre>

<h2>Installation for Self Hosting</h2>

<p>Clone this repo. Run <code>crystal make --release src/cowapi.cr</code> to build it.</p>

<h2>Usage for Self Hosting</h2>

<p>Simply run <code>./cowapi</code> to run the server. To use a port other than 3000, use the <code>--port</code> flag.</p>

<p>cowapi doesn't have inbuilt rate-limiting, so I recommend using nginx's rate limiting.</p>

<h2>Contributing</h2>

<p>Submitting issues with ideas for features is recommended! If you want to contribute with code:</p>

<ol><li>Fork it ( https://github.com/azah/cowapi/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/azah" target="_blank">your-github-name</a> Andrew Zah - creator, maintainer</li></ul>
</div>
</body>
</html>
